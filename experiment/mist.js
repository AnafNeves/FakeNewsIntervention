var mist_fake_covid = [
    {
        item: "Online Rumors Mislead Public About Effectiveness of COVID-19 Masks",
        name: "MIST_fake_covid_1",
    },
    {
        item: "Breaking: COVID-19 Vaccine Causes Severe Allergic Reactions, Study Finds",
        name: "MIST_fake_covid_2",
    },
    {
        item: "Social Media Scare: False Claims That COVID-19 Was Engineered as a Bioweapon",
        name: "MIST_fake_covid_3",
    },
    { item: "Experts Warn: 5G Technology Linked to Spread of COVID-19", name: "MIST_fake_covid_4" },
    {
        item: "Fact Check: No, Bill Gates Did Not Create COVID-19 to Microchip the Population",
        name: "MIST_fake_covid_5",
    },
    {
        item: "Vaccine Skepticism Soars as Unverified Reports of Adverse Effects Circulate",
        name: "MIST_fake_covid_6",
    },
    {
        item: "COVID-19 Party Invites Go Viral: Dangerous Trend Sparks Concern Among Health Experts",
        name: "MIST_fake_covid_7",
    },
    {
        item: "Lab Leak Conspiracy Theories Gain Traction Among Student Protest Groups",
        name: "MIST_fake_covid_8",
    },
    {
        item: "Pandemic Profiteering: Companies Peddle Fake COVID-19 Cures for Profit",
        name: "MIST_fake_covid_9",
    },
    {
        item: "Misleading Headlines Exaggerate COVID-19 Risks, Undermine Trust in Authorities",
        name: "MIST_fake_covid_10",
    },
]

var mist_real_covid = [
    {
        item: "How a Covid Surge in Florida Became a Surge of the Vaccinated",
        name: "MIST_real_covid_1",
    },
    {
        item: "COVID-19 and Chronic Stress: How the Pandemic Has Affected Mental Health",
        name: "MIST_real_covid_2",
    },
    {
        item: "Misinformation Fueling Vaccine Hesitancy Among Young Adults",
        name: "MIST_real_covid_3",
    },
    { item: "Mask Mandates Return Amidst Surge in COVID-19 Cases", name: "MIST_real_covid_4" },
    {
        item: "In America's Covid hot spots, cases still high but hope is growing",
        name: "MIST_real_covid_5",
    },
    {
        item: "Doctors brace for surge in hospitalizations as US reaches Covid-19 tipping point",
        name: "MIST_real_covid_6",
    },
    { item: "False claims that COVID-19 is less deadly than reported", name: "MIST_real_covid_7" },
    {
        item: "Social media giants face criticism for allowing spread of COVID-19 misinformation",
        name: "MIST_real_covid_8",
    },
    {
        item: "COVID-19 Vaccine Mandates: Balancing Public Health and Individual Rights",
        name: "MIST_real_covid_9",
    },
    {
        item: "COVID-19 pandemic has intensified conspiracies and digital deception: Report",
        name: "MIST_real_covid_10",
    },
]

var mist_fake_general = [
    {
        item: "Breaking: Scientists Discover Fountain of Youth in Remote Amazonian Village",
        name: "MIST_fake_general_1",
    },
    {
        item: "Exclusive: Elon Musk to Launch First Mars Colony by 2030, Claims Insider Source",
        name: "MIST_fake_general_2",
    },
    {
        item: "Investigation Uncovers Secret Society Controlling Global Economy",
        name: "MIST_fake_general_3",
    },
    {
        item: "Study Shows Drinking Coffee Before Bed Improves Sleep Quality",
        name: "MIST_fake_general_4",
    },
    {
        item: "Mysterious Crop Circles Found in Midwest Cornfield - Alien Connection Suspected",
        name: "MIST_fake_general_5",
    },
    {
        item: "Experts Warn of Impending Asteroid Collision with Earth, Urgent Action Needed",
        name: "MIST_fake_general_6",
    },
    {
        item: "New Superfood Found in Remote Himalayan Mountains - Promises to Cure All Ailments",
        name: "MIST_fake_general_7",
    },
    {
        item: "AI Breakthrough: Robot Learns to Experience Emotions, Raises Ethical Concerns",
        name: "MIST_fake_general_8",
    },
    {
        item: "Government Conspiracy: Chemtrails Revealed as Mind-Control Experiment",
        name: "MIST_fake_general_9",
    },
    {
        item: "Study Finds Playing Video Games Boosts Cognitive Function in Adults",
        name: "MIST_fake_general_10",
    },
    {
        item: "New Study Suggests Eating Ice Cream for Breakfast Improves Mental Acuity",
        name: "MIST_fake_general_11",
    },
    {
        item: "New Research Shows Listening to Classical Music Increases IQ",
        name: "MIST_fake_general_12",
    },
    {
        item: "Exclusive: Deep State Conspiracy Revealed in Classified Documents",
        name: "MIST_fake_general_13",
    },
    {
        item: "Exclusive: Area 51 Whistleblower Reveals Government Experiments on Aliens",
        name: "MIST_fake_general_14",
    },
    {
        item: "Experts Warn of Subliminal Messaging in Popular Music, Mind Control Suspected",
        name: "MIST_fake_general_15",
    },
    {
        item: "Government Officials Have Illegally Manipulated the Weather to Cause Devastating Storms",
        name: "MIST_fake_general_16",
    },
    {
        item: "The Government Is Knowingly Spreading Disease Through the Airwaves and Food Supply",
        name: "MIST_fake_general_17",
    },
    {
        item: "Government Officials Have Manipulated Stock Prices to Hide Scandals",
        name: "MIST_fake_general_18",
    },
    {
        item: "New Study: Left-Wingers Are More Likely to Lie to Get a Higher Salary",
        name: "MIST_fake_general_19",
    },
    {
        item: "New Study: Clear Relationship Between Eye Color and Intelligence",
        name: "MIST_fake_general_20",
    },
    {
        item: "The Corporate Media Is Controlled by the Military-Industrial Complex: The Major Oil Companies Own the Media and Control Their Agenda",
        name: "MIST_fake_general_21",
    },
    {
        item: "The Government Is Manipulating the Public's Perception of Genetic Engineering in Order to Make People More Accepting of Such Techniques",
        name: "MIST_fake_general_22",
    },
    {
        item: "Ebola Virus 'Caused by US Nuclear Weapons Testing', New Study Says",
        name: "MIST_fake_general_23",
    },
    {
        item: "Left-Wing Extremism Causes 'More Damage' to World Than Terrorism, Says UN Report",
        name: "MIST_fake_general_24",
    },
    {
        item: "The Government Is Actively Destroying Evidence Related to the JFK Assassination",
        name: "MIST_fake_general_25",
    },
    {
        item: "A Small Group of People Control the World Economy by Manipulating the Price of Gold and Oil",
        name: "MIST_fake_general_26",
    },
    {
        item: "The Government Is Conducting a Massive Cover-Up of Their Involvement in 9/11",
        name: "MIST_fake_general_27",
    },
    {
        item: "Climate Scientists' Work Is 'Unreliable', a 'Deceptive Method of Communication'",
        name: "MIST_fake_general_28",
    },
    {
        item: "Left-Wingers Are More Likely to Lie to Get a Good Grade",
        name: "MIST_fake_general_29",
    },
    {
        item: "Certain Vaccines Are Loaded with Dangerous Chemicals and Toxins",
        name: "MIST_fake_general_30",
    },
]

var mist_real_general = [
    {
        item: "New Study Shows Eating Chocolate Regularly Linked to Lower Risk of Heart Disease",
        name: "MIST_real_general_1",
    },
    {
        item: "NASA Scientists Discover New Potential for Life on Saturn's Moon Enceladus",
        name: "MIST_real_general_2",
    },
    {
        item: "AI Assistants Could Soon Understand Human Emotions, Researchers Say",
        name: "MIST_real_general_3",
    },
    {
        item: "Renowned Psychic Claims to Have Predicted Major Political Events with Accuracy",
        name: "MIST_real_general_4",
    },
    {
        item: "New Superfood from South America Found to Have Potent Anti-Inflammatory Properties",
        name: "MIST_real_general_5",
    },
    {
        item: "Study Finds Playing Video Games Can Improve Cognitive Function and Decision-Making Skills",
        name: "MIST_real_general_6",
    },
    {
        item: "Investigation Reveals Secretive Group Allegedly Experimenting with Human DNA in Remote Lab",
        name: "MIST_real_general_7",
    },
    {
        item: "Government Official Confirms Existence of UFOs, Releases Declassified Documents",
        name: "MIST_real_general_8",
    },
    {
        item: "Viral Video Shows Alleged UFO Sighting, Experts Analyze Footage",
        name: "MIST_real_general_9",
    },
    {
        item: "Viral TikTok Challenge Causes Nationwide Power Outage, Authorities Investigate",
        name: "MIST_real_general_10",
    },
    {
        item: "Experts Warn of Potential for Telepathic Surveillance by Government Agencies",
        name: "MIST_real_general_11",
    },
    {
        item: "Exclusive: Secret Moon Base Uncovered in Newly Declassified Documents",
        name: "MIST_real_general_12",
    },
    {
        item: "Renowned Physicist Claims to Have Solved Mystery of Bermuda Triangle",
        name: "MIST_real_general_13",
    },
    {
        item: "Experts Warn of Potential for Zombie Apocalypse, Call for Preparedness Measures",
        name: "MIST_real_general_14",
    },
    {
        item: "Study Shows Consuming Red Wine Regularly Can Lower Risk of Heart Disease",
        name: "MIST_real_general_15",
    },
    {
        item: "Democrats More Supportive than Republicans of Federal Spending for Scientific Research",
        name: "MIST_real_general_16",
    },
    {
        item: "International Relations Experts and US Public Agree: America Is Less Respected Globally",
        name: "MIST_real_general_17",
    },
    {
        item: "Reflecting a Demographic Shift, 109 US Counties Have Become Majority Nonwhite Since 2000",
        name: "MIST_real_general_18",
    },
    {
        item: "Morocco's King Appoints Committee Chief to Fight Poverty and Inequality",
        name: "MIST_real_general_19",
    },
    { item: "Hyatt Will Remove Small Bottles from Hotel Bathrooms", name: "MIST_real_general_20" },
    { item: "US Support for Legal Marijuana Steady in Past Year", name: "MIST_real_general_21" },
    {
        item: "One-in-Three Worldwide Lack Confidence in Non-Governmental Organizations",
        name: "MIST_real_general_22",
    },
    {
        item: "Global Warming Age Gap: Younger Americans Most Worried",
        name: "MIST_real_general_23",
    },
    {
        item: "Republicans Divided in Views of Trump's Conduct, Democrats Are Broadly Critical",
        name: "MIST_real_general_24",
    },
    {
        item: "Attitudes Toward EU Are Largely Positive, Both Within Europe and Outside It",
        name: "MIST_real_general_25",
    },
    {
        item: "US Hispanic Population Reached New High in 2018, But Growth Has Slowed",
        name: "MIST_real_general_26",
    },
    { item: "Taiwan Seeks to Join Fight Against Global Warming", name: "MIST_real_general_27" },
    {
        item: "About a Quarter of Large US Newspapers Laid off Staff in 2018",
        name: "MIST_real_general_28",
    },
    { item: "Majority in US Still Want Abortion Legal, with Limits", name: "MIST_real_general_29" },
    {
        item: "Most Americans Say It's OK for Professional Athletes to Speak out Publicly about Politics",
        name: "MIST_real_general_30",
    },
    {
        item: "United Nations Gets Mostly Positive Marks from People Around the World",
        name: "MIST_real_general_31",
    },
]

function mist_randomize(mist_fake_covid, mist_real_covid, mist_fake_general, mist_real_general) {
    fake_covid = jsPsych.randomization.shuffle(mist_fake_covid)
    real_covid = jsPsych.randomization.shuffle(mist_real_covid)
    fake_general = jsPsych.randomization.shuffle(mist_fake_general)
    real_general = jsPsych.randomization.shuffle(mist_real_general)

    pre_fake_covid = fake_covid.slice(0, fake_covid.length / 2)
    pre_real_covid = real_covid.slice(0, real_covid.length / 2)
    pre_fake_general = fake_general.slice(0, fake_general.length / 2)
    pre_real_general = real_general.slice(0, real_general.length / 2)
    post_fake_covid = fake_covid.slice(fake_covid.length / 2)
    post_real_covid = real_covid.slice(real_covid.length / 2)
    post_fake_general = fake_general.slice(fake_general.length / 2)
    post_real_general = real_general.slice(real_general.length / 2)

    pre = pre_fake_covid.concat(pre_real_covid, pre_fake_covid, pre_real_general, post_fake_general)
    post = post_fake_covid.concat(
        post_real_covid,
        post_fake_covid,
        post_real_general,
        post_fake_general
    )

    pre = jsPsych.randomization.shuffle(pre)
    post = jsPsych.randomization.shuffle(post)

    return { pre: pre, post: post }
}

// Format MIST items
function mist_format(mist_items) {
    // Each mist_items is an object with 'item' and 'name' keys
    var mist_questions = []
    for (const [index, element] of mist_items.entries()) {
        mist_questions.push({
            prompt: "<b>" + element["item"] + "</b>",
            name: element["name"],
            ticks: ["Fake", "Real"],
            required: false,
        })
    }
    return mist_questions
}

function make_mist_questionnaire(
    mist_fake_covid,
    mist_real_covid,
    mist_fake_general,
    mist_real_general
) {
    items = mist_randomize(mist_fake_covid, mist_real_covid, mist_fake_general, mist_real_general)

    mist_questions_pre = mist_format(items["pre"])
    mist_questions_post = mist_format(items["post"])

    return {
        pre: {
            type: jsPsychSurveySlider,
            questions: mist_questions_pre,
            preamble: "The following news headlines are a combination of real, published headlines and fake headlines designed to look like real ones. Please read the following news headlines and rate them on a scale from 'Fake' to 'Real' with the middle meaning unsure and closer to each end of the scale indicating greater confidence in your answer.",
            require_movement: false,
            slider_width: 700,
            data: {
                screen: "questionnaire_mist_pre",
            },
        },
        post: {
            type: jsPsychSurveySlider,
            questions: mist_questions_post,
            preamble: "The following news headlines are a combination of real, published headlines and fake headlines designed to look like real ones. Please read the following news headlines and rate them on a scale from 'Fake' to 'Real' with the middle meaning unsure and closer to each end of the scale indicating greater confidence in your answer",
            require_movement: false,
            slider_width: 700,
            data: {
                screen: "questionnaire_mist_post",
            },
        },
    }
}
